<div id="map_markers" style='width: 1000px; height: 400px;'></div>

<script type="text/javascript">
  $(document).ready(function(){
    handler = Gmaps.build('Google');
    handler.buildMap({ provider: {}, internal: {id: 'map_markers'}}, function(){
    markers = handler.addMarkers(<%=raw hash.to_json %>);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
    
    });

   //  var directionsDisplay = new google.maps.DirectionsRenderer();
   //  var directionsService = new google.maps.DirectionsService();
   //  function calcRoute(lat,lng) {
   //    console.log(lat,lng);
   //    var origin = new google.maps.LatLng(17.412361, 78.413337);
   //    var destination = new google.maps.LatLng(lat,lng);
   //    var request = {
   //        origin:      origin,
   //        destination: destination,
   //        travelMode:  google.maps.TravelMode.DRIVING
   //    };
   //    directionsService.route(request, function(response, status) {
   //      if (status == google.maps.DirectionsStatus.OK) {
   //        directionsDisplay.setDirections(response);
   //      }
   //    });
   //  }
      
   //  <% hash.each do |loc|%>
   //    calcRoute(<%= loc[:lat] %>, <%= loc[:lng] %>);
   //  <%end%>
   //    var handler = Gmaps.build('Google');
   //    handler.buildMap({ internal: {id: 'map_markers'}}, function(){
   //    directionsDisplay.setMap(handler.getMap());
    
   // });
  });
</script>

